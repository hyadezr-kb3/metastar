import{j as e}from"./index-oPbkWy5c.js";import{r as y,e as I,f as $,g as L}from"./ui-BqWFczew.js";import{r as M}from"./lunar-C8YQgFCV.js";import"./vendor-Dh3zDKDA.js";var D=M();const Z={嫁娶:"嫁娶",订盟:"訂盟",安床:"安床",会亲友:"會友",入宅:"移徙",移徙:"移徙",动土:"動土",修造:"動土",拆卸:"動土",开市:"開市",交易:"交易",立券:"交易",赴任:"赴任",出行:"出行",理发:"理髮",扫舍:"掃舍",祭祀:"祭祀",祈福:"祈福",安葬:"安葬"},Y={马:"馬",见:"見",贝:"貝",车:"車",长:"長",门:"門",选:"選",韦:"韋",让:"讓",风:"風",飞:"飛",电:"電",东:"東",西:"西",南:"南",北:"北",龙:"龍",鸡:"雞",猪:"豬",鼠:"鼠",牛:"牛",虎:"虎",兔:"兔",蛇:"蛇",羊:"羊",猴:"猴",狗:"狗",执:"執",战:"戰",腊:"臘",陈:"陳",财:"財",开:"開",无:"無",成:"成",收:"收",匮:"匱",除:"除",满:"滿",平:"平",定:"定",破:"破",危:"危",闭:"閉",黄:"黃",黑:"黑"},i=n=>n?String(n).split("").map(t=>Y[t]||t).join(""):"",S=n=>{if(!n)return"";const s=t=>t.toString().padStart(2,"0");return`${s(n.getDay())}-${s(n.getMonth())}-${n.getYear().toString().slice(2)} ${s(n.getHour())}:${s(n.getMinute())}:${s(n.getSecond())}`},v=n=>{const s=new Set;return n.forEach(t=>{const r=Z[t];r&&s.add(r)}),Array.from(s).map(t=>({original:t}))},C=n=>{if(!n)return null;const s=D.Solar.fromDate(n),t=D.Lunar.fromDate(n),r=t.getJieQi(),c=r?i(r):"",m=t.getPrevJieQi(!0),d=m?i(m.getName()):"",h=m?m.getSolar():null,p=t.getNextJieQi(!0),l=p?i(p.getName()):"",u=p?p.getSolar():null,g=i(t.getZhiXing()),x=o=>{const j={震:"正東",巽:"東南",离:"正南",離:"正南",坤:"西南",兑:"正西",兌:"正西",乾:"西北",坎:"正北",艮:"東北",中:"中宮"},f=String(o),a=f.trim();return j[a]||i(f)};return{solar:{year:s.getYear(),month:s.getMonth(),day:s.getDay(),weekDay:s.getWeek(),weekDayChinese:i(s.getWeekInChinese()),constellation:i(s.getXingZuo()),fullString:s.toYmd()},lunar:{yearString:`${t.getYearInGanZhi()}(${i(t.getYearShengXiao())})年`,monthString:`${i(t.getMonthInChinese())}月`,dayString:`${i(t.getDayInChinese())}`,fullString:t.toString(),season:i(t.getSeason()),dayGanZhi:i(t.getDayInGanZhi()),monthGanZhi:i(t.getMonthInGanZhi()),yearGanZhi:i(t.getYearInGanZhi()),dayShengXiao:i(t.getDayShengXiao())},term:{daily:c,current:{name:d,time:h?S(h):""},next:{name:l,time:u?S(u):""}},gods:{wealth:x(t.getDayPositionCai()),happy:x(t.getDayPositionXi()),fortune:x(t.getDayPositionFu())},info:{pengZu:{gan:i(t.getPengZuGan()),zhi:i(t.getPengZuZhi())},naYin:i(t.getDayNaYin()),nineStar:i(t.getDayNineStar().toString()),xiu:i(t.getXiu()),zodiacSha:i(t.getDaySha()),zodiacChong:i(t.getDayChongDesc()),valueGod:i(t.getDayTianShen()),valueGodType:i(t.getDayTianShenType())},officer:{name:g},yi:v(t.getDayYi()),ji:v(t.getDayJi())}},z=n=>{const s=[],t=["子","丑","寅","卯","辰","巳","午","未","申","酉","戌","亥"],r=m=>{if(m===0)return"23:00-01:00";const d=(m*2-1).toString().padStart(2,"0"),h=(m*2+1).toString().padStart(2,"0");return`${d}:00-${h}:00`},c=m=>{const d={震:"正東",巽:"東南",离:"正南",離:"正南",坤:"西南",兑:"正西",兌:"正西",乾:"西北",坎:"正北",艮:"東北",中:"中宮"},h=String(m),p=h.trim();return d[p]||i(h)};return t.forEach((m,d)=>{let h=d*2;d===0&&(h=0);const p=new Date(n);p.setHours(h,0,0,0);const l=D.Lunar.fromDate(p),u=i(l.getTimeTianShen()),g=i(l.getTimeTianShenLuck()),x=l.getTimeYi(),o=v(x).map(a=>a.original),j=l.getTimeJi(),f=v(j).map(a=>a.original);s.push({zhi:m,range:r(d),ganZhi:l.getTimeInGanZhi(),tianShen:u,type:g,yi:o,ji:f,chong:i(l.getTimeChongDesc()),sha:i(l.getTimeSha()),gods:{wealth:c(l.getTimePositionCai()),happy:c(l.getTimePositionXi()),fortune:c(l.getTimePositionFu())}})}),s},R=Array.from({length:201},(n,s)=>1900+s),A=Array.from({length:12},(n,s)=>s+1),w=({options:n,value:s,onChange:t,label:r})=>{const c=y.useRef(null),m=40;return y.useEffect(()=>{if(c.current){const d=n.indexOf(s);d!==-1&&(c.current.scrollTop=d*m)}},[s,n]),e.jsx("div",{className:"flex flex-col items-center h-[200px] w-full relative",children:e.jsx("div",{ref:c,className:"w-full h-full overflow-y-auto no-scrollbar snap-y snap-mandatory py-[80px]",onScroll:d=>{const h=Math.round(d.target.scrollTop/m);n[h]!==s&&n[h]},children:n.map((d,h)=>e.jsxs("div",{onClick:()=>t(d),className:`
                            h-[40px] flex items-center justify-center snap-center cursor-pointer transition-all duration-200
                            ${d===s?"text-ink font-bold text-xl scale-110":"text-stone-300"}
                        `,children:[d,r]},d))})})},E=({date:n,onChange:s})=>{const t=n.getFullYear(),r=n.getMonth()+1,c=n.getDate(),m=(g,x)=>new Date(g,x,0).getDate(),d=m(t,r),h=Array.from({length:d},(g,x)=>x+1),p=g=>{const x=m(g,r),o=c>x?x:c;s(new Date(g,r-1,o))},l=g=>{const x=m(t,g),o=c>x?x:c;s(new Date(t,g-1,o))},u=g=>{s(new Date(t,r-1,g))};return e.jsxs("div",{className:"bg-paper rounded-xl shadow-inner border border-stone-200 p-4 relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-1/2 left-0 right-0 h-[40px] -mt-[20px] bg-stone-100/50 pointer-events-none border-y border-stone-200/50 z-0"}),e.jsxs("div",{className:"flex justify-between items-center relative z-10 font-sans",children:[e.jsx("div",{className:"w-1/3 border-r border-stone-100",children:e.jsx(w,{options:R,value:t,onChange:p,label:"年"})}),e.jsx("div",{className:"w-1/3 border-r border-stone-100",children:e.jsx(w,{options:A,value:r,onChange:l,label:"月"})}),e.jsx("div",{className:"w-1/3",children:e.jsx(w,{options:h,value:c,onChange:u,label:"日"})})]}),e.jsx("div",{className:"absolute top-0 left-0 right-0 h-[60px] bg-gradient-to-b from-paper to-transparent pointer-events-none z-20"}),e.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-[60px] bg-gradient-to-t from-paper to-transparent pointer-events-none z-20"})]})},J=["日","一","二","三","四","五","六"],F=({currentDate:n,selectDate:s,onHeaderClick:t})=>{const r=n.getFullYear(),c=n.getMonth(),m=new Date(r,c,1),d=new Date(r,c+1,0),h=m.getDay(),p=d.getDate(),l=[],u=42;for(let o=0;o<h;o++)l.push(null);for(let o=1;o<=p;o++)l.push(new Date(r,c,o));for(;l.length<u;)l.push(null);const g=o=>{o.stopPropagation(),s(new Date(r,c-1,1))},x=o=>{o.stopPropagation(),s(new Date(r,c+1,1))};return e.jsxs("div",{className:"bg-white shadow-sm border-b border-stone-200 pb-2",children:[e.jsxs("div",{className:"flex items-center justify-between px-4 py-1.5 bg-paper border-b border-stone-50",children:[e.jsx("button",{onClick:g,className:"p-1.5 rounded-full hover:bg-stone-100 text-stone-400 active:scale-95",children:e.jsx(I,{size:20})}),e.jsxs("button",{onClick:t,className:"text-lg font-bold text-ink font-sans tracking-widest flex items-center gap-1 active:opacity-60 transition-opacity",children:[e.jsxs("span",{children:[r,"年 ",c+1,"月"]}),e.jsx($,{size:14,className:"text-stone-400"})]}),e.jsx("button",{onClick:x,className:"p-1.5 rounded-full hover:bg-stone-100 text-stone-400 active:scale-95",children:e.jsx(L,{size:20})})]}),e.jsxs("div",{className:"px-4",children:[e.jsx("div",{className:"grid grid-cols-7 text-center mb-0.5 border-b border-stone-50",children:J.map((o,j)=>e.jsx("div",{className:`text-[10px] font-bold py-1 ${j===0||j===6?"text-red-500":"text-stone-300"}`,children:o},j))}),e.jsx("div",{className:"grid grid-cols-7 gap-px bg-stone-50/50",children:l.map((o,j)=>{if(!o)return e.jsx("div",{className:"h-10"},j);const f=o.getDate()===n.getDate()&&o.getMonth()===n.getMonth()&&o.getFullYear()===n.getFullYear(),a=new Date().toDateString()===o.toDateString(),b=C(o),N=b.term.daily,P=N||b.lunar.dayString,G=!!N;return e.jsxs("div",{onClick:()=>s(o),style:{backgroundColor:f?"#15803d":a&&!f?"#f0fdf4":""},className:`
                                    h-10 flex flex-col items-center justify-center rounded-md cursor-pointer transition-all relative
                                    ${f?"text-white shadow-sm":"hover:bg-stone-100 text-ink"}
                                    ${a&&!f?"":"bg-white"}
                                `,children:[e.jsx("span",{className:`text-xl font-bold leading-none mb-0.5 ${f?"text-white":"text-stone-800"}`,children:o.getDate()}),e.jsx("span",{className:`text-[9px] scale-90 ${f?"text-white/90":G?"text-green-700 font-bold":"text-stone-600 font-bold"}`,children:P}),a&&!f&&e.jsx("div",{className:"absolute top-0.5 right-0.5 w-1 h-1 bg-red-500 rounded-full"})]},j)})})]})]})},X=""+new URL("wealth-D-qgKFuI.PNG",import.meta.url).href,H=""+new URL("happy-D7f_ZW4m.PNG",import.meta.url).href,U=""+new URL("great-DlWVvAt2.PNG",import.meta.url).href,_=""+new URL("good-D-aLa1x7.PNG",import.meta.url).href,W=""+new URL("bad-B8XPklwQ.PNG",import.meta.url).href,k=""+new URL("todo-Beemu1Sm.PNG",import.meta.url).href,T=""+new URL("notdo-DmLf6UI_.PNG",import.meta.url).href,V=({date:n,setDate:s})=>{const[t,r]=y.useState(!1),[c,m]=y.useState(null),[d,h]=y.useState([]);if(y.useEffect(()=>{const a=C(n),b=z(n);m(a),h(b)},[n]),!c)return e.jsx("div",{className:"p-10 text-center",children:"Loading..."});const{solar:p,lunar:l,term:u,gods:g,info:x,yi:o,ji:j,officer:f}=c;return e.jsxs("div",{className:"pb-24 bg-stone-50 min-h-screen",children:[e.jsx("div",{className:"bg-white sticky top-14 z-40",children:e.jsx(F,{currentDate:n,selectDate:s,onHeaderClick:()=>r(!0)})}),t&&e.jsx("div",{className:"fixed inset-0 z-[100] flex items-end sm:items-center justify-center bg-black/50 backdrop-blur-sm animation-fade-in",onClick:()=>r(!1),children:e.jsxs("div",{className:"bg-white w-full max-w-lg rounded-t-2xl sm:rounded-2xl p-4 animate-slide-up sm:animate-zoom-in",onClick:a=>a.stopPropagation(),children:[e.jsxs("div",{className:"flex justify-between items-center mb-4 border-b border-stone-100 pb-2",children:[e.jsx("span",{className:"text-lg font-bold text-ink",children:"選擇日期"}),e.jsx("button",{onClick:()=>r(!1),className:"text-clay font-bold",children:"完成"})]}),e.jsx(E,{date:n,onChange:s})]})}),e.jsxs("div",{className:"px-3 py-2 space-y-2 max-w-lg mx-auto",children:[e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-stone-200 overflow-hidden relative",children:[e.jsxs("div",{className:"p-3 relative z-10 text-center",children:[e.jsxs("div",{className:"flex items-baseline justify-center gap-2 mb-0 leading-none",children:[e.jsx("span",{className:"text-5xl font-bold text-clay font-serif",children:p.day}),e.jsxs("span",{className:"text-2xl font-bold text-stone-600",children:[l.monthString,l.dayString]})]}),e.jsxs("div",{className:"text-sm text-stone-500 font-serif tracking-widest mb-2 leading-tight mt-1 font-bold",children:[p.year," • ",l.yearString," ",l.monthGanZhi,"月 ",l.dayGanZhi,"日 • ",p.weekDayChinese]}),e.jsxs("div",{className:"grid grid-cols-2 gap-0 divide-x divide-stone-200 text-base bg-stone-50 rounded-lg p-2 border border-stone-100 mb-2",children:[e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("span",{className:"text-[10px] text-stone-500 leading-none mb-0.5",children:"上個節氣"}),e.jsxs("div",{className:"leading-none",children:[e.jsx("span",{className:"font-bold text-stone-700 block text-lg",children:u.current.name||"無"}),e.jsx("span",{className:"text-[10px] text-stone-600 font-bold font-mono block transform scale-90",children:u.current.time})]})]}),e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("span",{className:"text-[10px] text-stone-500 leading-none mb-0.5",children:"下個節氣"}),e.jsxs("div",{className:"leading-none",children:[e.jsx("span",{className:"font-bold text-clay mr-1 block text-lg",children:u.next.name}),e.jsx("span",{className:"text-[10px] text-stone-600 font-bold font-mono block transform scale-90",children:u.next.time})]})]})]}),e.jsxs("div",{className:"grid grid-cols-6 gap-0 divide-x divide-stone-100 border-t border-b border-stone-100 py-1.5 text-center",children:[e.jsxs("div",{className:"flex flex-col items-center justify-center",children:[e.jsx("img",{src:X,alt:"財神",className:"w-4 h-4 object-contain mb-1"}),e.jsx("span",{className:"text-sm font-bold text-stone-800 leading-none",children:g.wealth})]}),e.jsxs("div",{className:"flex flex-col items-center justify-center",children:[e.jsx("img",{src:H,alt:"喜神",className:"w-4 h-4 object-contain mb-1"}),e.jsx("span",{className:"text-sm font-bold text-stone-800 leading-none",children:g.happy})]}),e.jsxs("div",{className:"flex flex-col items-center justify-center",children:[e.jsx("img",{src:U,alt:"福神",className:"w-4 h-4 object-contain mb-1"}),e.jsx("span",{className:"text-sm font-bold text-stone-800 leading-none",children:g.fortune})]}),e.jsxs("div",{className:"flex flex-col items-center justify-center",children:[e.jsx("span",{className:"text-[9px] text-stone-400 leading-none mb-0.5",children:"值神"}),e.jsxs("div",{className:"flex flex-col items-center leading-none",children:[e.jsx("span",{className:`text-sm font-bold leading-none ${x.valueGodType==="黃道"?"text-red-500":"text-stone-600"}`,children:x.valueGod}),e.jsxs("span",{className:`text-[9px] scale-90 mt-0.5 ${x.valueGodType==="黃道"?"text-red-400":"text-stone-500"}`,children:[x.valueGodType,"日"]})]})]}),e.jsxs("div",{className:"flex flex-col items-center justify-center",children:[e.jsx("span",{className:"text-[9px] text-stone-400 leading-none mb-0.5",children:"建除"}),e.jsxs("span",{className:"text-sm font-bold text-stone-800 leading-none",children:[f.name,"日"]})]}),e.jsxs("div",{className:"flex flex-col items-center justify-center px-1",children:[e.jsx("span",{className:"text-[9px] text-stone-400 leading-none mb-0.5",children:"沖煞"}),e.jsxs("div",{className:"flex flex-col items-center leading-none",children:[e.jsx("span",{className:"text-sm font-bold text-stone-800 leading-none whitespace-nowrap",children:x.zodiacChong}),e.jsxs("span",{className:"text-[9px] text-stone-500 whitespace-nowrap scale-90 mt-0.5",children:["煞",x.zodiacSha]})]})]})]})]}),e.jsxs("div",{className:"border-t border-stone-100 divide-y divide-stone-100",children:[e.jsxs("div",{className:"flex items-start px-3 py-1.5 bg-green-50/30",children:[e.jsx("img",{src:k,alt:"宜",className:"w-6 h-6 object-contain mr-2 shrink-0"}),e.jsx("div",{className:"flex flex-wrap gap-x-1 gap-y-0 text-sm text-stone-800 leading-tight mt-0.5",children:o.length>0?o.map((a,b)=>e.jsx("span",{className:"font-bold",children:a.original},b)):e.jsx("span",{className:"font-bold text-stone-400",children:"諸事不宜"})})]}),e.jsxs("div",{className:"flex items-start px-3 py-1.5 bg-red-50/30",children:[e.jsx("img",{src:T,alt:"忌",className:"w-6 h-6 object-contain mr-2 shrink-0"}),e.jsx("div",{className:"flex flex-wrap gap-x-1 gap-y-0 text-sm text-stone-800 leading-tight mt-0.5",children:j.length>0?j.map((a,b)=>e.jsx("span",{className:"font-bold",children:a.original},b)):e.jsx("span",{className:"font-bold text-stone-400",children:"無"})})]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-stone-200 overflow-hidden mt-4",children:[e.jsxs("div",{className:"bg-stone-50 border-b border-stone-200 p-2 flex items-center gap-2",children:[e.jsx("div",{className:"w-1.5 h-4 bg-clay rounded-full"}),e.jsx("span",{className:"text-base font-bold text-stone-700",children:"時辰吉凶"})]}),e.jsx("div",{className:"divide-y divide-stone-100",children:d.map((a,b)=>e.jsxs("div",{className:"flex items-stretch text-base min-h-[44px]",children:[e.jsxs("div",{className:"w-16 bg-stone-50 flex flex-col items-center justify-center text-stone-500 border-r border-stone-100 shrink-0",children:[e.jsxs("span",{className:"font-bold text-stone-800 text-base leading-none",children:[a.zhi,"時"]}),e.jsx("span",{className:"text-[10px] leading-none mt-0.5",children:a.range.split("-")[0]})]}),e.jsx("div",{className:"w-10 flex items-center justify-center border-r border-stone-100 shrink-0",children:a.type==="吉"?e.jsx("img",{src:_,alt:"吉",className:"w-6 h-6 object-contain"}):e.jsx("img",{src:W,alt:"凶",className:"w-6 h-6 object-contain"})}),e.jsxs("div",{className:"flex-1 px-3 py-1 flex flex-col justify-center min-w-0 border-r border-stone-100",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-0.5",children:[e.jsx("span",{className:"text-xs text-stone-500 font-mono leading-none",children:a.ganZhi}),e.jsx("span",{className:`text-[10px] px-1.5 py-0 rounded-full leading-relaxed ${a.type==="吉"?"bg-red-100 text-red-600":"bg-stone-100 text-stone-500"}`,children:a.tianShen}),e.jsxs("span",{className:"text-[10px] text-red-500 shrink-0 ml-1",children:["沖",a.chong.includes("(")?a.chong:`(${a.chong})`,"・煞",a.sha]})]}),e.jsxs("div",{className:"flex items-start text-[10px] text-stone-600 leading-none mb-0.5",children:[e.jsx("img",{src:k,alt:"宜",className:"w-3 h-3 object-contain mr-1"}),e.jsx("div",{className:"truncate",children:a.yi&&a.yi.length>0?a.yi.map(N=>N).slice(0,8).join(" "):e.jsx("span",{className:"text-stone-400",children:"諸事不宜"})})]}),e.jsxs("div",{className:"flex items-start text-[10px] text-stone-600 leading-none",children:[e.jsx("img",{src:T,alt:"忌",className:"w-3 h-3 object-contain mr-1"}),e.jsx("div",{className:"truncate",children:a.ji&&a.ji.length>0?a.ji.map(N=>N).slice(0,8).join(" "):e.jsx("span",{className:"text-stone-400",children:"無"})})]})]}),e.jsx("div",{className:"w-16 shrink-0 flex flex-col justify-center text-[10px] px-1 text-stone-500 bg-stone-50/30",children:e.jsxs("div",{className:"flex flex-col space-y-[2px] leading-none",children:[e.jsx("div",{className:"flex justify-between",children:e.jsxs("span",{children:["財: ",a.gods?.wealth]})}),e.jsx("div",{className:"flex justify-between",children:e.jsxs("span",{children:["喜: ",a.gods?.happy]})}),e.jsx("div",{className:"flex justify-between",children:e.jsxs("span",{children:["福: ",a.gods?.fortune]})})]})})]},b))})]})]})]})};export{V as default};
