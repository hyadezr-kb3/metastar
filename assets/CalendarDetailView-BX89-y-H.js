import{j as e}from"./index-BdgcZ_dC.js";import{r as N,e as Y,f as R,g as L}from"./ui-BqWFczew.js";import{r as Z}from"./lunar-C8YQgFCV.js";import"./vendor-Dh3zDKDA.js";var D=Z();const z={嫁娶:"嫁娶",订盟:"訂盟",安床:"安床",会亲友:"會友",入宅:"移徙",移徙:"移徙",动土:"動土",修造:"動土",拆卸:"動土",交易:"交易",立券:"交易",赴任:"赴任",出行:"出行",理发:"理髮",扫舍:"掃舍",祭祀:"祭祀",祈福:"祈福",安葬:"安葬"},E={马:"馬",见:"見",贝:"貝",车:"車",长:"長",门:"門",选:"選",韦:"韋",让:"讓",风:"風",飞:"飛",电:"電",东:"東",西:"西",南:"南",北:"北",龙:"龍",鸡:"雞",猪:"豬",鼠:"鼠",牛:"牛",虎:"虎",兔:"兔",蛇:"蛇",羊:"羊",猴:"猴",狗:"狗",执:"執",战:"戰",腊:"臘",陈:"陳",财:"財",开:"開",无:"無",成:"成",收:"收",匮:"匱",除:"除",满:"滿",平:"平",定:"定",破:"破",危:"危",闭:"閉",黄:"黃",黑:"黑"},r=n=>n?String(n).split("").map(t=>E[t]||t).join(""):"",S=n=>{if(!n)return"";const s=t=>t.toString().padStart(2,"0");return`${s(n.getDay())}-${s(n.getMonth())}-${n.getYear().toString().slice(2)} ${s(n.getHour())}:${s(n.getMinute())}:${s(n.getSecond())}`},v=n=>{const s=new Set;return n.forEach(t=>{const c=z[t];c&&s.add(c)}),Array.from(s).map(t=>({original:t}))},M=n=>{if(!n)return null;const s=D.Solar.fromDate(n),t=D.Lunar.fromDate(n),c=t.getJieQi(),d=c?r(c):"",m=t.getPrevJieQi(!0),g=m?r(m.getName()):"",p=m?m.getSolar():null,l=t.getNextJieQi(!0),i=l?r(l.getName()):"",f=l?l.getSolar():null,h=r(t.getZhiXing()),x=o=>{const j={震:"正東",巽:"東南",离:"正南",離:"正南",坤:"西南",兑:"正西",兌:"正西",乾:"西北",坎:"正北",艮:"東北",中:"中宮"},u=String(o),a=u.trim();return j[a]||r(u)};return{solar:{year:s.getYear(),month:s.getMonth(),day:s.getDay(),weekDay:s.getWeek(),weekDayChinese:r(s.getWeekInChinese()),constellation:r(s.getXingZuo()),fullString:s.toYmd()},lunar:{yearString:`${t.getYearInGanZhi()}(${r(t.getYearShengXiao())})年`,monthString:`${r(t.getMonthInChinese())}月`,dayString:`${r(t.getDayInChinese())}`,fullString:t.toString(),season:r(t.getSeason()),dayGanZhi:r(t.getDayInGanZhi()),monthGanZhi:r(t.getMonthInGanZhi()),yearGanZhi:r(t.getYearInGanZhi()),dayShengXiao:r(t.getDayShengXiao())},term:{daily:d,current:{name:g,time:p?S(p):""},next:{name:i,time:f?S(f):""}},gods:{wealth:x(t.getDayPositionCai()),happy:x(t.getDayPositionXi()),fortune:x(t.getDayPositionFu())},info:{pengZu:{gan:r(t.getPengZuGan()),zhi:r(t.getPengZuZhi())},naYin:r(t.getDayNaYin()),nineStar:r(t.getDayNineStar().toString()),xiu:r(t.getXiu()),zodiacSha:r(t.getDaySha()),zodiacChong:r(t.getDayChongDesc()),valueGod:r(t.getDayTianShen()),valueGodType:r(t.getDayTianShenType())},officer:{name:h},yi:v(t.getDayYi()),ji:v(t.getDayJi())}},J=n=>{const s=[],t=["子","丑","寅","卯","辰","巳","午","未","申","酉","戌","亥"],c=m=>{if(m===0)return"23:00-01:00";const g=(m*2-1).toString().padStart(2,"0"),p=(m*2+1).toString().padStart(2,"0");return`${g}:00-${p}:00`},d=m=>{const g={震:"正東",巽:"東南",离:"正南",離:"正南",坤:"西南",兑:"正西",兌:"正西",乾:"西北",坎:"正北",艮:"東北",中:"中宮"},p=String(m),l=p.trim();return g[l]||r(p)};return t.forEach((m,g)=>{let p=g*2;g===0&&(p=0);const l=new Date(n);l.setHours(p,0,0,0);const i=D.Lunar.fromDate(l),f=r(i.getTimeTianShen()),h=r(i.getTimeTianShenLuck()),x=i.getTimeYi(),o=v(x).map(a=>a.original),j=i.getTimeJi(),u=v(j).map(a=>a.original);s.push({zhi:m,range:c(g),ganZhi:i.getTimeInGanZhi(),tianShen:f,type:h,yi:o,ji:u,chong:r(i.getTimeChongDesc()),sha:r(i.getTimeSha()),gods:{wealth:d(i.getTimePositionCai()),happy:d(i.getTimePositionXi()),fortune:d(i.getTimePositionFu())}})}),s},A=Array.from({length:201},(n,s)=>1900+s),F=Array.from({length:12},(n,s)=>s+1),w=({options:n,value:s,onChange:t,label:c})=>{const d=N.useRef(null),m=40,g=N.useRef(null);N.useEffect(()=>{if(d.current){const l=n.indexOf(s);l!==-1&&(d.current.scrollTop=l*m)}},[s,n]);const p=l=>{g.current&&clearTimeout(g.current);const i=l.target.scrollTop;g.current=setTimeout(()=>{const f=Math.round(i/m);n[f]!==void 0&&n[f]!==s&&t(n[f])},100)};return e.jsx("div",{className:"flex flex-col items-center h-[200px] w-full relative",children:e.jsx("div",{ref:d,className:"w-full h-full overflow-y-auto no-scrollbar snap-y snap-mandatory py-[80px] touch-pan-y overscroll-contain",onScroll:p,style:{scrollbarWidth:"none",msOverflowStyle:"none"},children:n.map((l,i)=>e.jsxs("div",{onClick:()=>t(l),className:`
                            h-[40px] flex items-center justify-center snap-center cursor-pointer transition-all duration-200
                            ${l===s?"text-ink font-bold text-xl scale-110":"text-stone-300"}
                        `,children:[l,c]},l))})})},H=({date:n,onChange:s})=>{const t=n.getFullYear(),c=n.getMonth()+1,d=n.getDate(),m=(h,x)=>new Date(h,x,0).getDate(),g=m(t,c),p=Array.from({length:g},(h,x)=>x+1),l=h=>{const x=m(h,c),o=d>x?x:d;s(new Date(h,c-1,o))},i=h=>{const x=m(t,h),o=d>x?x:d;s(new Date(t,h-1,o))},f=h=>{s(new Date(t,c-1,h))};return e.jsxs("div",{className:"bg-paper rounded-xl shadow-inner border border-stone-200 p-4 relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-1/2 left-0 right-0 h-[40px] -mt-[20px] bg-stone-100/50 pointer-events-none border-y border-stone-200/50 z-0"}),e.jsxs("div",{className:"flex justify-between items-center relative z-10 font-sans",children:[e.jsx("div",{className:"w-1/3 border-r border-stone-100",children:e.jsx(w,{options:A,value:t,onChange:l,label:"年"})}),e.jsx("div",{className:"w-1/3 border-r border-stone-100",children:e.jsx(w,{options:F,value:c,onChange:i,label:"月"})}),e.jsx("div",{className:"w-1/3",children:e.jsx(w,{options:p,value:d,onChange:f,label:"日"})})]}),e.jsx("div",{className:"absolute top-0 left-0 right-0 h-[60px] bg-gradient-to-b from-paper to-transparent pointer-events-none z-20"}),e.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-[60px] bg-gradient-to-t from-paper to-transparent pointer-events-none z-20"})]})},U=["日","一","二","三","四","五","六"],X=({currentDate:n,selectDate:s,onHeaderClick:t})=>{const c=n.getFullYear(),d=n.getMonth(),m=new Date(c,d,1),g=new Date(c,d+1,0),p=m.getDay(),l=g.getDate(),i=[],f=42;for(let o=0;o<p;o++)i.push(null);for(let o=1;o<=l;o++)i.push(new Date(c,d,o));for(;i.length<f;)i.push(null);const h=o=>{o.stopPropagation(),s(new Date(c,d-1,1))},x=o=>{o.stopPropagation(),s(new Date(c,d+1,1))};return e.jsxs("div",{className:"bg-white shadow-sm border-b border-stone-200 pb-2",children:[e.jsxs("div",{className:"flex items-center justify-between px-4 py-1.5 bg-paper border-b border-stone-50",children:[e.jsx("button",{onClick:h,className:"p-1.5 rounded-full hover:bg-stone-100 text-stone-400 active:scale-95",children:e.jsx(Y,{size:20})}),e.jsxs("button",{onClick:t,className:"text-lg font-bold text-ink font-sans tracking-widest flex items-center gap-1 active:opacity-60 transition-opacity",children:[e.jsxs("span",{children:[c,"年 ",d+1,"月"]}),e.jsx(R,{size:14,className:"text-stone-400"})]}),e.jsx("button",{onClick:x,className:"p-1.5 rounded-full hover:bg-stone-100 text-stone-400 active:scale-95",children:e.jsx(L,{size:20})})]}),e.jsxs("div",{className:"px-4",children:[e.jsx("div",{className:"grid grid-cols-7 text-center mb-0.5 border-b border-stone-50",children:U.map((o,j)=>e.jsx("div",{className:`text-[10px] font-bold py-1 ${j===0||j===6?"text-red-500":"text-stone-300"}`,children:o},j))}),e.jsx("div",{className:"grid grid-cols-7 gap-px bg-stone-50/50",children:i.map((o,j)=>{if(!o)return e.jsx("div",{className:"h-10"},j);const u=o.getDate()===n.getDate()&&o.getMonth()===n.getMonth()&&o.getFullYear()===n.getFullYear(),a=new Date().toDateString()===o.toDateString(),b=M(o),y=b.term.daily,I=y||b.lunar.dayString,$=!!y;return e.jsxs("div",{onClick:()=>s(o),style:{backgroundColor:u?"#15803d":a&&!u?"#f0fdf4":""},className:`
                                    h-10 flex flex-col items-center justify-center rounded-md cursor-pointer transition-all relative
                                    ${u?"text-white shadow-sm":"hover:bg-stone-100 text-ink"}
                                    ${a&&!u?"":"bg-white"}
                                `,children:[e.jsx("span",{className:`text-xl font-bold leading-none mb-0.5 ${u?"text-white":"text-stone-800"}`,children:o.getDate()}),e.jsx("span",{className:`text-[9px] scale-90 ${u?"text-white/90":$?"text-green-700 font-bold":"text-stone-600 font-bold"}`,children:I}),a&&!u&&e.jsx("div",{className:"absolute top-0.5 right-0.5 w-1 h-1 bg-red-500 rounded-full"})]},j)})})]})]})},k=""+new URL("wealth-7lS8Ozd4.PNG",import.meta.url).href,T=""+new URL("happy-4d5Ydbyn.PNG",import.meta.url).href,C=""+new URL("great-BRRMPhQy.PNG",import.meta.url).href,Q=""+new URL("good-Bxtmc76y.PNG",import.meta.url).href,W=""+new URL("bad-DQKY-kUR.PNG",import.meta.url).href,P=""+new URL("todo-9M3lKd1f.PNG",import.meta.url).href,G=""+new URL("notdo-Mk4xOFNP.PNG",import.meta.url).href,q=({date:n,setDate:s})=>{const[t,c]=N.useState(!1),[d,m]=N.useState(null),[g,p]=N.useState([]);if(N.useEffect(()=>{const a=M(n),b=J(n);m(a),p(b)},[n]),!d)return e.jsx("div",{className:"p-10 text-center",children:"Loading..."});const{solar:l,lunar:i,term:f,gods:h,info:x,yi:o,ji:j,officer:u}=d;return e.jsxs("div",{className:"pb-24 bg-stone-50 min-h-screen",children:[e.jsx("div",{className:"bg-white sticky top-14 z-40",children:e.jsx(X,{currentDate:n,selectDate:s,onHeaderClick:()=>c(!0)})}),t&&e.jsx("div",{className:"fixed inset-0 z-[100] flex items-end sm:items-center justify-center bg-black/50 backdrop-blur-sm animation-fade-in",onClick:()=>c(!1),children:e.jsxs("div",{className:"bg-white w-full max-w-lg rounded-t-2xl sm:rounded-2xl p-4 animate-slide-up sm:animate-zoom-in",onClick:a=>a.stopPropagation(),children:[e.jsxs("div",{className:"flex justify-between items-center mb-4 border-b border-stone-100 pb-2",children:[e.jsx("span",{className:"text-lg font-bold text-ink",children:"選擇日期"}),e.jsx("button",{onClick:()=>c(!1),className:"text-clay font-bold",children:"完成"})]}),e.jsx(H,{date:n,onChange:s})]})}),e.jsxs("div",{className:"px-3 py-2 space-y-2 max-w-lg mx-auto",children:[e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-stone-200 overflow-hidden relative",children:[e.jsxs("div",{className:"p-3 relative z-10 text-center",children:[e.jsxs("div",{className:"flex items-baseline justify-center gap-2 mb-0 leading-none",children:[e.jsx("span",{className:"text-5xl font-bold text-clay font-serif",children:l.day}),e.jsxs("span",{className:"text-2xl font-bold text-stone-600",children:[i.monthString,i.dayString]})]}),e.jsxs("div",{className:"text-xl text-stone-500 font-serif tracking-widest mb-2 leading-tight mt-1 font-bold",children:[l.year," • ",i.yearString," ",i.monthGanZhi,"月 ",i.dayGanZhi,"日 • ",l.weekDayChinese]}),e.jsxs("div",{className:"grid grid-cols-2 gap-0 divide-x divide-stone-200 text-base bg-stone-50 rounded-lg p-2 border border-stone-100 mb-2",children:[e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("span",{className:"text-[10px] text-stone-500 leading-none mb-0.5",children:"上個節氣"}),e.jsxs("div",{className:"leading-none",children:[e.jsx("span",{className:"font-bold text-stone-700 block text-lg",children:f.current.name||"無"}),e.jsx("span",{className:"text-xs text-stone-600 font-bold font-mono block whitespace-nowrap",children:f.current.time})]})]}),e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("span",{className:"text-[10px] text-stone-500 leading-none mb-0.5",children:"下個節氣"}),e.jsxs("div",{className:"leading-none",children:[e.jsx("span",{className:"font-bold text-clay mr-1 block text-lg",children:f.next.name}),e.jsx("span",{className:"text-xs text-stone-600 font-bold font-mono block whitespace-nowrap",children:f.next.time})]})]})]}),e.jsxs("div",{className:"grid grid-cols-6 gap-0 divide-x divide-stone-100 border-t border-b border-stone-100 py-1.5 text-center",children:[e.jsxs("div",{className:"flex flex-col items-center justify-center",children:[e.jsx("img",{src:k,alt:"財神",className:"w-6 h-6 object-contain mb-1"}),e.jsx("span",{className:"text-sm font-bold text-stone-800 leading-none",children:h.wealth})]}),e.jsxs("div",{className:"flex flex-col items-center justify-center",children:[e.jsx("img",{src:T,alt:"喜神",className:"w-6 h-6 object-contain mb-1"}),e.jsx("span",{className:"text-sm font-bold text-stone-800 leading-none",children:h.happy})]}),e.jsxs("div",{className:"flex flex-col items-center justify-center",children:[e.jsx("img",{src:C,alt:"福神",className:"w-6 h-6 object-contain mb-1"}),e.jsx("span",{className:"text-sm font-bold text-stone-800 leading-none",children:h.fortune})]}),e.jsxs("div",{className:"flex flex-col items-center justify-center",children:[e.jsx("span",{className:"text-xs text-stone-400 leading-none mb-0.5",children:"值神"}),e.jsxs("div",{className:"flex flex-col items-center leading-none",children:[e.jsx("span",{className:`text-sm font-bold leading-none ${x.valueGodType==="黃道"?"text-red-500":"text-stone-600"}`,children:x.valueGod}),e.jsxs("span",{className:`text-[10px] mt-0.5 ${x.valueGodType==="黃道"?"text-red-400":"text-stone-500"}`,children:[x.valueGodType,"日"]})]})]}),e.jsxs("div",{className:"flex flex-col items-center justify-center",children:[e.jsx("span",{className:"text-xs text-stone-400 leading-none mb-0.5",children:"建除"}),e.jsxs("span",{className:"text-sm font-bold text-stone-800 leading-none",children:[u.name,"日"]})]}),e.jsxs("div",{className:"flex flex-col items-center justify-center px-1",children:[e.jsx("span",{className:"text-xs text-stone-400 leading-none mb-0.5",children:"沖煞"}),e.jsxs("div",{className:"flex flex-col items-center leading-none",children:[e.jsx("span",{className:"text-sm font-bold text-stone-800 leading-none whitespace-nowrap",children:x.zodiacChong}),e.jsxs("span",{className:"text-[10px] text-stone-500 whitespace-nowrap mt-0.5",children:["煞",x.zodiacSha]})]})]})]})]}),e.jsxs("div",{className:"border-t border-stone-100 divide-y divide-stone-100",children:[e.jsxs("div",{className:"flex items-start px-3 py-1.5 bg-green-50/30",children:[e.jsx("img",{src:P,alt:"宜",className:"w-6 h-6 object-contain mr-2 shrink-0"}),e.jsx("div",{className:"flex flex-wrap gap-x-1 gap-y-0 text-sm text-stone-800 leading-tight mt-0.5",children:o.length>0?o.map((a,b)=>e.jsx("span",{className:"font-bold",children:a.original},b)):e.jsx("span",{className:"font-bold text-stone-400",children:"諸事不宜"})})]}),e.jsxs("div",{className:"flex items-start px-3 py-1.5 bg-red-50/30",children:[e.jsx("img",{src:G,alt:"忌",className:"w-6 h-6 object-contain mr-2 shrink-0"}),e.jsx("div",{className:"flex flex-wrap gap-x-1 gap-y-0 text-sm text-stone-800 leading-tight mt-0.5",children:j.length>0?j.map((a,b)=>e.jsx("span",{className:"font-bold",children:a.original},b)):e.jsx("span",{className:"font-bold text-stone-400",children:"無"})})]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-stone-200 overflow-hidden mt-4",children:[e.jsxs("div",{className:"bg-stone-50 border-b border-stone-200 p-2 flex items-center gap-2",children:[e.jsx("div",{className:"w-1.5 h-4 bg-clay rounded-full"}),e.jsx("span",{className:"text-base font-bold text-stone-700",children:"時辰吉凶"})]}),e.jsx("div",{className:"divide-y divide-stone-100",children:g.map((a,b)=>e.jsxs("div",{className:"flex items-stretch text-base min-h-[44px]",children:[e.jsxs("div",{className:"w-16 bg-stone-50 flex flex-col items-center justify-center text-stone-500 border-r border-stone-100 shrink-0",children:[e.jsxs("span",{className:"font-bold text-stone-800 text-base leading-none",children:[a.zhi,"時"]}),e.jsx("span",{className:"text-[10px] leading-none mt-0.5",children:a.range.split("-")[0]})]}),e.jsx("div",{className:"w-14 flex items-center justify-center border-r border-stone-100 shrink-0",children:a.type==="吉"?e.jsx("img",{src:Q,alt:"吉",className:"w-6 h-6 object-contain"}):e.jsx("img",{src:W,alt:"凶",className:"w-6 h-6 object-contain"})}),e.jsxs("div",{className:"flex-1 px-3 py-1 flex flex-col justify-center min-w-0 border-r border-stone-100",children:[e.jsxs("div",{className:"flex items-center gap-1 mb-0.5",children:[e.jsx("span",{className:"text-xs text-stone-500 font-mono leading-none",children:a.ganZhi}),e.jsx("span",{className:`text-[10px] px-1 py-0 rounded-full leading-relaxed ${a.type==="吉"?"bg-red-100 text-red-600":"bg-stone-100 text-stone-500"}`,children:a.tianShen}),e.jsxs("span",{className:"text-[10px] text-red-500 shrink-0 ml-1 whitespace-nowrap",children:["沖",a.chong.includes("(")?a.chong:`(${a.chong})`,"・煞",a.sha]})]}),e.jsxs("div",{className:"flex items-start text-xs text-stone-600 leading-none mb-0.5",children:[e.jsx("img",{src:P,alt:"宜",className:"w-4 h-4 object-contain mr-1"}),e.jsx("div",{className:"truncate",children:a.yi&&a.yi.length>0?a.yi.map(y=>y).slice(0,8).join(" "):e.jsx("span",{className:"text-stone-400",children:"諸事不宜"})})]}),e.jsxs("div",{className:"flex items-start text-xs text-stone-600 leading-none",children:[e.jsx("img",{src:G,alt:"忌",className:"w-4 h-4 object-contain mr-1"}),e.jsx("div",{className:"truncate",children:a.ji&&a.ji.length>0?a.ji.map(y=>y).slice(0,8).join(" "):e.jsx("span",{className:"text-stone-400",children:"無"})})]}),e.jsxs("div",{className:"flex items-center gap-3 mt-1",children:[e.jsxs("div",{className:"flex items-center text-xs text-stone-500 leading-none",children:[e.jsx("img",{src:k,alt:"財",className:"w-4 h-4 object-contain mr-1"}),e.jsx("span",{children:a.gods?.wealth})]}),e.jsxs("div",{className:"flex items-center text-xs text-stone-500 leading-none",children:[e.jsx("img",{src:T,alt:"喜",className:"w-4 h-4 object-contain mr-1"}),e.jsx("span",{children:a.gods?.happy})]}),e.jsxs("div",{className:"flex items-center text-xs text-stone-500 leading-none",children:[e.jsx("img",{src:C,alt:"福",className:"w-4 h-4 object-contain mr-1"}),e.jsx("span",{children:a.gods?.fortune})]})]})]})]},b))})]})]})]})};export{q as default};
